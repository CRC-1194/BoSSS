<?xml version="1.0" encoding="utf-8"?>
<BoSSSControl>
    <Base>
        <dboptions path="C:\BoSSS\bosss_db"/>
        <grid guid="12345678-9012-3456-7890-123456789012"/>
        
        <description name="control file example">
            control file example
        </description>
        <tags>
            control example
        </tags>
        
        <!-- Sets solver to 'query' mode which extracts data from existing
			 runs. This setting implies to _nothing_ will be stored to the
			 database. -->
        <run mode="query"/>
        
		<!-- Please make sure that the definition of the degrees agrees with
			 the definition of the queried session. Otherwise, the results of
			 the evaluation will suffer from projection errors. -->
        <fields_degree>
            <field identification="VelocityX" degree="2"/>
            <field identification="VelocityY" degree="2"/>
            <field identification="Phi" degree="2"/>
        </fields_degree>
    </Base>
    
	<!-- In query-mode, initial mode 'restart' is mandatory. -->
    <initial mode="restart">
		<restart>
			<!-- The query will extract data from the specified timestep -->
            <session guid="12345678-9012-3456-7890-123456789012" timestepno="99"/>
		</restart>
    </initial>
    
    <Solver>
        <logging savetodb="true" saveperiod="5" tracing="false"/>
        <termcond NoOfTimesteps="5" Endtime="50"/>
        <timestepping dtMin="0.0" dtMax="0.2" CFLFrac = "0.3"/>
  
        <boundary>
            <bc edgetagname="velocity_inlet">
                <formula>
                    u(x,y)=1-y*y
                </formula>
            </bc>
            <bc edgetagname="wall">
            </bc>
            <bc edgetagname="pressure_outlet">
                <value field="pressure">0.0</value>
            </bc>
        </boundary>
        <properties>
            <float key="Reynolds">10.0</float>
            <float key="penalty_poisson">2.5</float>
            <float key="penalty_viscous">1.5</float>
            <string key="pressure_solver">iterative-pressure-solver</string>
            <string key="viscous_solver">iterative-viscous-solver</string>
            <fvector key="PoissonRefPt">5.0 0.0</fvector>
            <string key="method:major-opt">projection</string>
            <string key="method:minor-opt">lie</string>
            <string key="bc-and-fluxes">kummers-method</string>
            <float key="CrankNic:theta">1.0</float>
            <string key="IOFields">pri_Velocity IntVelocity pri_Phi DivB4 DivAfter </string>
            <string key="ResFields">pri_Velocity pri_Phi DivB4 DivAfter </string>
        </properties>
		
		<!-- The queries to be evaluated. For more informaion about supported
			 queries, see 05-queries.xml-->
		<Queries>
			<L2Norm id="dummy1">
                <field identification="VelocityX" />
            </L2Norm>
		</Queries>
    </Solver>
    
    <sparsesolver name="iterative-pressure-solver">
        <type>pCG</type>
        <library>hypre</library>
        <specific>
            <MaxIterations>1000000</MaxIterations>
            <ConvergenceType>Relative</ConvergenceType>
            <Tolerance>1.0e-9</Tolerance>
        </specific>
    </sparsesolver>

    <sparsesolver name="iterative-viscous-solver">
        <type>PCG</type>
        <library>hypre</library>
        <specific>
            <MaxIterations>8000</MaxIterations>
            <ConvergenceType>Relative</ConvergenceType>
            <Tolerance>1.0e-12</Tolerance>
            <TwoNorm>true</TwoNorm>
        </specific>
    </sparsesolver>
</BoSSSControl>
